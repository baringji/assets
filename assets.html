<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Assets - Inpsyde Assets</title> <link rel="shortcut icon" href="https://inpsyde.github.io/assets/assets/images/favicon.png"> <link rel="stylesheet" href="/assets/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Assets | Inpsyde Assets</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="Assets" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Inpsyde Assets is a Composer package (not a plugin) that allows to deal with scripts and styles in a WordPress site." /> <meta property="og:description" content="Inpsyde Assets is a Composer package (not a plugin) that allows to deal with scripts and styles in a WordPress site." /> <link rel="canonical" href="https://inpsyde.github.io/assets/assets.html" /> <meta property="og:url" content="https://inpsyde.github.io/assets/assets.html" /> <meta property="og:site_name" content="Inpsyde Assets" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Assets" /> <script type="application/ld+json"> {"headline":"Assets","description":"Inpsyde Assets is a Composer package (not a plugin) that allows to deal with scripts and styles in a WordPress site.","url":"https://inpsyde.github.io/assets/assets.html","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://inpsyde.github.io/assets/assets/images/inpsyde_RGB_flat.png"}},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://inpsyde.github.io/assets/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="https://inpsyde.github.io/assets/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="https://inpsyde.github.io/assets/getting-started.html" class="nav-list-link">Getting started</a></li><li class="nav-list-item"><a href="https://inpsyde.github.io/assets/asset-factory.html" class="nav-list-link">Asset Factory</a></li><li class="nav-list-item"><a href="https://inpsyde.github.io/assets/loaders.html" class="nav-list-link">Loaders</a></li><li class="nav-list-item active"><a href="https://inpsyde.github.io/assets/assets.html" class="nav-list-link active">Assets</a></li><li class="nav-list-item"><a href="https://inpsyde.github.io/assets/output-filter.html" class="nav-list-link">Output Filter</a></li><li class="nav-list-item"><a href="https://inpsyde.github.io/assets/helpers.html" class="nav-list-link">Helpers</a></li><li class="nav-list-item"><a href="https://inpsyde.github.io/assets/migration.html" class="nav-list-link">Migration</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Inpsyde Assets" aria-label="Search Inpsyde Assets" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="fw-500 no_toc" id="assets"> <a href="#assets" class="anchor-heading" aria-labelledby="assets"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Assets </h1> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#overview-api" id="markdown-toc-overview-api">Overview API</a></li> <li><a href="#using-the-public-api-methods" id="markdown-toc-using-the-public-api-methods">Using the public API (methods)</a> <ol> <li><a href="#versions" id="markdown-toc-versions">Versions</a></li> <li><a href="#enqueue-conditionally" id="markdown-toc-enqueue-conditionally">Enqueue conditionally</a></li> <li><a href="#location" id="markdown-toc-location">Location</a> <ol> <li><a href="#api" id="markdown-toc-api">API</a></li> <li><a href="#using-multiple-locations" id="markdown-toc-using-multiple-locations">Using multiple locations</a></li> </ol> </li> <li><a href="#dependencies-resolving" id="markdown-toc-dependencies-resolving">Dependencies resolving</a> <ol> <li><a href="#automatic-resolving-of-script-dependencies-with-webpack" id="markdown-toc-automatic-resolving-of-script-dependencies-with-webpack">Automatic resolving of Script dependencies with Webpack</a></li> </ol> </li> <li><a href="#change-the-handler" id="markdown-toc-change-the-handler">Change the Handler</a></li> <li><a href="#add-filters" id="markdown-toc-add-filters">Add Filters</a> <ol> <li><a href="#script" id="markdown-toc-script"><code class="language-plaintext highlighter-rouge">Script</code></a></li> <li><a href="#style" id="markdown-toc-style"><code class="language-plaintext highlighter-rouge">Style</code></a></li> </ol> </li> <li><a href="#localize-data" id="markdown-toc-localize-data">Localize data</a></li> <li><a href="#translation-data" id="markdown-toc-translation-data">Translation data</a></li> <li><a href="#script-enqueue-footerheader" id="markdown-toc-script-enqueue-footerheader">Script enqueue Footer/Header</a></li> <li><a href="#adding-inline-scripts" id="markdown-toc-adding-inline-scripts">Adding inline scripts</a></li> <li><a href="#adding-inline-styles" id="markdown-toc-adding-inline-styles">Adding inline styles</a></li> <li><a href="#conditional-comments-for-scriptstyle" id="markdown-toc-conditional-comments-for-scriptstyle">Conditional comments for Script/Style</a></li> <li><a href="#attributes" id="markdown-toc-attributes">Attributes</a></li> </ol> </li> </ol><hr /> <p>There are two main classes delivered:</p> <ul> <li><code class="language-plaintext highlighter-rouge">Inpsyde\Assets\Script</code> - dealing with JavaScript-files.</li> <li><code class="language-plaintext highlighter-rouge">Inpsyde\Assets\Style</code> - dealing with CSS-files.</li> </ul> <p>Each instance requires a <code class="language-plaintext highlighter-rouge">string $handle</code>, <code class="language-plaintext highlighter-rouge">string $url</code> and <code class="language-plaintext highlighter-rouge">int $location</code>.</p> <h2 id="overview-api"> <a href="#overview-api" class="anchor-heading" aria-labelledby="overview-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview API </h2> <p>Following configurations are available:</p> <div class="table-wrapper"><table> <thead> <tr> <th>property</th> <th>type</th> <th>default</th> <th><code class="language-plaintext highlighter-rouge">Script</code></th> <th><code class="language-plaintext highlighter-rouge">Style</code></th> <th>description</th> </tr> </thead> <tbody> <tr> <td>filePath</td> <td>string</td> <td><code class="language-plaintext highlighter-rouge">''</code></td> <td>x</td> <td>x</td> <td>optional path which can be set to autodiscover the Asset version</td> </tr> <tr> <td>dependencies</td> <td>array</td> <td><code class="language-plaintext highlighter-rouge">[]</code></td> <td>x</td> <td>x</td> <td>all defined depending handles</td> </tr> <tr> <td>location</td> <td>int</td> <td>falls back to <code class="language-plaintext highlighter-rouge">Asset::FRONTEND</code></td> <td>x</td> <td>x</td> <td>depending on location of the <code class="language-plaintext highlighter-rouge">Asset</code>, it will be enqueued with different hooks</td> </tr> <tr> <td>version</td> <td>string</td> <td><code class="language-plaintext highlighter-rouge">null</code></td> <td>x</td> <td>x</td> <td>version of the given asset</td> </tr> <tr> <td>enqueue</td> <td>bool/callable</td> <td><code class="language-plaintext highlighter-rouge">true</code></td> <td>x</td> <td>x</td> <td>is the asset only registered or also enqueued</td> </tr> <tr> <td>data</td> <td>array/callable</td> <td><code class="language-plaintext highlighter-rouge">[]</code></td> <td>x</td> <td>x</td> <td>additional data assigned to the asset via <code class="language-plaintext highlighter-rouge">WP_Script::add_data</code> or <code class="language-plaintext highlighter-rouge">WP_Style::add_data</code></td> </tr> <tr> <td>filters</td> <td>callable[]</td> <td><code class="language-plaintext highlighter-rouge">[]</code></td> <td>x</td> <td>x</td> <td>an array of <code class="language-plaintext highlighter-rouge">Inpsyde\Assets\OutputFilter</code> or callable values to manipulate the output</td> </tr> <tr> <td>handler</td> <td>string</td> <td><code class="language-plaintext highlighter-rouge">ScriptHandler::class</code> or <code class="language-plaintext highlighter-rouge">StyleHandler::class</code></td> <td>x</td> <td>x</td> <td>The handler which will be used to register/enqueue the Asset</td> </tr> <tr> <td>attributes</td> <td>array</td> <td><code class="language-plaintext highlighter-rouge">[]</code></td> <td>x</td> <td>x</td> <td>Allows to set additional attributes to the <code class="language-plaintext highlighter-rouge">script</code>- or <code class="language-plaintext highlighter-rouge">link</code>-tag</td> </tr> <tr> <td>media</td> <td>string</td> <td><code class="language-plaintext highlighter-rouge">'all'</code></td> <td> </td> <td>x</td> <td>type of media for the <code class="language-plaintext highlighter-rouge">Style</code></td> </tr> <tr> <td>localize</td> <td>array</td> <td><code class="language-plaintext highlighter-rouge">[]</code></td> <td>x</td> <td> </td> <td>localized array of data attached to <code class="language-plaintext highlighter-rouge">Script</code></td> </tr> <tr> <td>inFooter</td> <td>bool</td> <td><code class="language-plaintext highlighter-rouge">true</code></td> <td>x</td> <td> </td> <td>defines if the current <code class="language-plaintext highlighter-rouge">Script</code> is printed in footer</td> </tr> <tr> <td>inline</td> <td>array</td> <td><code class="language-plaintext highlighter-rouge">[]</code></td> <td>x</td> <td> </td> <td>allows you to add inline scripts to <code class="language-plaintext highlighter-rouge">Script</code>-class via <code class="language-plaintext highlighter-rouge">['before' =&gt; [], 'after' =&gt; []]</code></td> </tr> <tr> <td>translation</td> <td>array</td> <td><code class="language-plaintext highlighter-rouge">[]</code></td> <td>x</td> <td> </td> <td>Load translation for <code class="language-plaintext highlighter-rouge">Script</code>-class via <code class="language-plaintext highlighter-rouge">['path' =&gt; string, 'domain' =&gt; string]</code></td> </tr> </tbody> </table></div> <h2 id="using-the-public-api-methods"> <a href="#using-the-public-api-methods" class="anchor-heading" aria-labelledby="using-the-public-api-methods"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the public API (methods) </h2> <h3 id="versions"> <a href="#versions" class="anchor-heading" aria-labelledby="versions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Versions </h3> <p>The version can be set in different ways and even autogenerated based on the file time. Following is possible:</p> <div class="table-wrapper"><table> <thead> <tr> <th>version</th> <th>autodiscover</th> <th>returns</th> <th>note</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">null</code> (default)</td> <td><code class="language-plaintext highlighter-rouge">true</code> (default)</td> <td>filemtime</td> <td>the default behavior</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">null</code> (default)</td> <td><code class="language-plaintext highlighter-rouge">false</code></td> <td><code class="language-plaintext highlighter-rouge">null</code></td> <td>no version in WP is used</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">'1.2.3'</code></td> <td><code class="language-plaintext highlighter-rouge">true</code> / <code class="language-plaintext highlighter-rouge">false</code></td> <td><code class="language-plaintext highlighter-rouge">'1.2.3'</code></td> <td> </td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">''</code></td> <td><code class="language-plaintext highlighter-rouge">true</code> / <code class="language-plaintext highlighter-rouge">false</code></td> <td>current WP version</td> <td> </td> </tr> </tbody> </table></div> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Style</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/script.js'</span><span class="p">);</span>
<span class="nv">$script</span>
    <span class="o">-&gt;</span><span class="nf">withFilePath</span><span class="p">(</span><span class="s1">'/path/to/script.js'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">disableAutodiscoverVersion</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="nf">enableAutodiscoverVersion</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="nf">withVersion</span><span class="p">(</span><span class="s1">'1.0'</span><span class="p">);</span>

<span class="nv">$style</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Style</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/style.css'</span><span class="p">);</span>
<span class="nv">$style</span>
    <span class="o">-&gt;</span><span class="nf">withFilePath</span><span class="p">(</span><span class="s1">'/path/to/style.css'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">disableAutodiscoverVersion</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="nf">enableAutodiscoverVersion</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="nf">withVersion</span><span class="p">(</span><span class="s1">'1.0'</span><span class="p">);</span>
</code></pre></div></div> <h3 id="enqueue-conditionally"> <a href="#enqueue-conditionally" class="anchor-heading" aria-labelledby="enqueue-conditionally"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Enqueue conditionally </h3> <p>You can enqueue your Assets conditionally by using following API:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Style</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/script.js'</span><span class="p">);</span>
<span class="nv">$script</span><span class="o">-&gt;</span><span class="nf">canEnqueue</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="nv">$style</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Style</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/style.css'</span><span class="p">);</span>
<span class="nv">$style</span><span class="o">-&gt;</span><span class="nf">canEnqueue</span><span class="p">(</span><span class="k">function</span><span class="p">():</span> <span class="kt">bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nf">is_admin</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div></div> <p>By default Assets are always enqueued.</p> <h3 id="location"> <a href="#location" class="anchor-heading" aria-labelledby="location"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Location </h3> <p>By default, the package comes with predefined locations of assets:</p> <div class="table-wrapper"><table> <thead> <tr> <th>const</th> <th>hook</th> <th>location</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">Asset::FRONTEND</code></td> <td><code class="language-plaintext highlighter-rouge">wp_enqueue_scripts</code></td> <td>Frontend</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Asset::BACKEND</code></td> <td><code class="language-plaintext highlighter-rouge">admin_enqueue_scripts</code></td> <td>Backend</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Asset::LOGIN</code></td> <td><code class="language-plaintext highlighter-rouge">login_enqueue_scripts</code></td> <td>wp-login.php</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Asset::CUSTOMIZER</code></td> <td><code class="language-plaintext highlighter-rouge">customize_controls_enqueue_scripts</code></td> <td>Customizer</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Asset::CUSTOMIZER_PREVIEW</code></td> <td><code class="language-plaintext highlighter-rouge">customize_preview_init</code></td> <td>Customizer Preview</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Asset::BLOCK_EDITOR_ASSETS</code></td> <td><code class="language-plaintext highlighter-rouge">enqueue_block_editor_assets</code></td> <td>Gutenberg Editor</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">Asset::BLOCK_ASSETS</code></td> <td><code class="language-plaintext highlighter-rouge">enqueue_block_editor_assets</code></td> <td>Frontend and Gutenberg Editor</td> </tr> </tbody> </table></div> <h4 id="api"> <a href="#api" class="anchor-heading" aria-labelledby="api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> API </h4> <p>Location can be set either in constructor directly or via methods:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Style</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Asset</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/script.js'</span><span class="p">,</span> <span class="nc">Asset</span><span class="o">::</span><span class="no">FRONTEND</span><span class="p">);</span>
<span class="c1">// overwrite location from constructor</span>
<span class="nv">$script</span><span class="o">-&gt;</span><span class="nf">forLocation</span><span class="p">(</span><span class="nc">Asset</span><span class="o">::</span><span class="no">BACKEND</span><span class="p">);</span>

<span class="nv">$style</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Style</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/style.css'</span><span class="p">);</span>
<span class="nv">$style</span><span class="o">-&gt;</span><span class="nf">forLocation</span><span class="p">(</span><span class="nc">Asset</span><span class="o">::</span><span class="no">FRONTEND</span><span class="p">);</span>
</code></pre></div></div> <p>The default location is <code class="language-plaintext highlighter-rouge">Asset::FRONTEND</code>.</p> <h4 id="using-multiple-locations"> <a href="#using-multiple-locations" class="anchor-heading" aria-labelledby="using-multiple-locations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using multiple locations </h4> <p>To avoid duplicated registration of Assets in different locations such as backend and frontend, it is possible to add multiple ones via bitwise operator <code class="language-plaintext highlighter-rouge">|</code> (OR).</p> <p>Here’s a short example for a <code class="language-plaintext highlighter-rouge">Style</code> which will be enqueued in frontend <em>and</em> backend:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\AssetManager</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Style</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Asset</span><span class="p">;</span>

<span class="nf">add_action</span><span class="p">(</span>
    <span class="nc">AssetManager</span><span class="o">::</span><span class="no">ACTION_SETUP</span><span class="p">,</span>
    <span class="k">function</span><span class="p">(</span><span class="kt">AssetManager</span> <span class="nv">$assetManager</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$style</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Style</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/style.css'</span><span class="p">,</span> <span class="nc">Asset</span><span class="o">::</span><span class="no">BACKEND</span> <span class="o">|</span> <span class="nc">Asset</span><span class="o">::</span><span class="no">FRONTEND</span> <span class="p">);</span>
        <span class="c1">// or</span>
        <span class="nv">$style</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Style</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/style.css'</span><span class="p">);</span>
        <span class="nv">$style</span><span class="o">-&gt;</span><span class="nf">forLocation</span><span class="p">(</span><span class="nc">Asset</span><span class="o">::</span><span class="no">BACKEND</span> <span class="o">|</span> <span class="nc">Asset</span><span class="o">::</span><span class="no">FRONTEND</span><span class="p">);</span>

        <span class="nv">$assetManager</span><span class="o">-&gt;</span><span class="nf">register</span><span class="p">(</span><span class="nv">$style</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">);</span>
</code></pre></div></div> <h3 id="dependencies-resolving"> <a href="#dependencies-resolving" class="anchor-heading" aria-labelledby="dependencies-resolving"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dependencies resolving </h3> <p>Adding an <code class="language-plaintext highlighter-rouge">Asset</code> with dependencies can be done like following:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Style</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Asset</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/script.js'</span><span class="p">,</span> <span class="nc">Asset</span><span class="o">::</span><span class="no">FRONTEND</span><span class="p">);</span>
<span class="nv">$script</span><span class="o">-&gt;</span><span class="nf">withDependencies</span><span class="p">(</span><span class="s1">'wp-elements'</span><span class="p">,</span> <span class="s1">'wp-core'</span><span class="p">,</span> <span class="s1">'wp-i18n'</span><span class="p">);</span>

<span class="nv">$style</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Style</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/style.css'</span><span class="p">);</span>
<span class="nv">$style</span><span class="o">-&gt;</span><span class="nf">withDependencies</span><span class="p">(</span><span class="s1">'wp-elements'</span><span class="p">);</span>
</code></pre></div></div> <h4 id="automatic-resolving-of-script-dependencies-with-webpack"> <a href="#automatic-resolving-of-script-dependencies-with-webpack" class="anchor-heading" aria-labelledby="automatic-resolving-of-script-dependencies-with-webpack"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Automatic resolving of Script dependencies with Webpack </h4> <p>The <code class="language-plaintext highlighter-rouge">Inpsyde\Assets\Script</code>-class has support for resolving dependencies and version which are generated by <a href="https://github.com/WordPress/gutenberg/tree/master/packages/dependency-extraction-webpack-plugin">dependency-extraction-webpack-plugin</a> .</p> <p>This Webpack-Plugin will create an additional <code class="language-plaintext highlighter-rouge">{fileName}.assets.json</code> or <code class="language-plaintext highlighter-rouge">{fileName}.assets.php</code>-file which contains an array of dependencies parsed out of your JavaScript-file and a version string. To use that feature you can use following:</p> <p><strong>script.assets.json</strong></p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"baz"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Asset</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/script.js'</span><span class="p">);</span>
<span class="nv">$script</span>
    <span class="o">-&gt;</span><span class="nf">forLocation</span><span class="p">(</span><span class="nc">Asset</span><span class="o">::</span><span class="no">FRONTEND</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">useDependencyExtractionPlugin</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="nf">withFilePath</span><span class="p">(</span><span class="s1">'/path/to/script.js'</span><span class="p">);</span>

<span class="nv">$script</span><span class="o">-&gt;</span><span class="nf">dependencies</span><span class="p">();</span>    <span class="c1">// ["foo", "bar", "baz"]</span>
<span class="nv">$script</span><span class="o">-&gt;</span><span class="nf">version</span><span class="p">();</span>        <span class="c1">// "1234567"</span>
</code></pre></div></div> <p>Based on your <code class="language-plaintext highlighter-rouge">Asset::filePath</code> the <code class="language-plaintext highlighter-rouge">Script</code> automatically searches in the same folder for <code class="language-plaintext highlighter-rouge">{fileName}.assets.json|php</code> and will load the data.</p> <p><strong>[!]</strong> This will not overwrite your existing settings:</p> <p><strong>script.assets.php</strong></p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">return</span> <span class="p">[</span>
    <span class="s2">"dependencies"</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s2">"foo"</span><span class="p">,</span> <span class="s2">"bar"</span><span class="p">,</span> <span class="s2">"baz"</span><span class="p">],</span>
    <span class="s2">"version"</span> <span class="o">=&gt;</span> <span class="s2">"1234567"</span>
<span class="p">];</span>
</code></pre></div></div> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Asset</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/script.js'</span><span class="p">);</span>
<span class="nv">$script</span>
    <span class="o">-&gt;</span><span class="nf">forLocation</span><span class="p">(</span><span class="nc">Asset</span><span class="o">::</span><span class="no">FRONTEND</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">useDependencyExtractionPlugin</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="nf">withVersion</span><span class="p">(</span><span class="s1">'1.0'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">withDependencies</span><span class="p">(</span><span class="s2">"some"</span><span class="p">,</span> <span class="s2">"other"</span><span class="p">,</span> <span class="s2">"dependencies"</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">withFilePath</span><span class="p">(</span><span class="s1">'/path/to/script.js'</span><span class="p">);</span>

<span class="nv">$script</span><span class="o">-&gt;</span><span class="nf">dependencies</span><span class="p">();</span>    <span class="c1">// ["foo", "bar", "baz", "some", "other", "dependencies"]</span>
<span class="nv">$script</span><span class="o">-&gt;</span><span class="nf">version</span><span class="p">();</span>        <span class="c1">// "1.0"</span>
</code></pre></div></div> <h3 id="change-the-handler"> <a href="#change-the-handler" class="anchor-heading" aria-labelledby="change-the-handler"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Change the Handler </h3> <p>It is possible to change for an <code class="language-plaintext highlighter-rouge">Asset</code> the Handler like following:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Handler\ScriptHandler</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/script.js'</span><span class="p">);</span>
<span class="nv">$script</span><span class="o">-&gt;</span><span class="nf">useHandler</span><span class="p">(</span><span class="nc">ScriptHandler</span><span class="o">::</span><span class="n">class</span><span class="p">);</span>
</code></pre></div></div> <h3 id="add-filters"> <a href="#add-filters" class="anchor-heading" aria-labelledby="add-filters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add Filters </h3> <h4 id="script"> <a href="#script" class="anchor-heading" aria-labelledby="script"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">Script</code> </h4> <p>Scripts are having following filters available:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\OutputFilter\AsyncScriptOutputFilter</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/script.js'</span><span class="p">);</span>
<span class="nv">$script</span>
    <span class="o">-&gt;</span><span class="nf">withFilters</span><span class="p">(</span><span class="nc">AsyncScriptOutputFilter</span><span class="o">::</span><span class="n">class</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">useDeferFilter</span><span class="p">()</span> <span class="c1">// shortcut</span>
    <span class="o">-&gt;</span><span class="nf">useAsyncFilter</span><span class="p">()</span> <span class="c1">// shortcut</span>
    <span class="o">-&gt;</span><span class="nf">useInlineFilter</span><span class="p">()</span> <span class="c1">// shortcut</span>
    <span class="o">-&gt;</span><span class="nf">withFilters</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="kt">string</span> <span class="nv">$html</span><span class="p">,</span> <span class="kt">Asset</span> <span class="nv">$asset</span><span class="p">):</span> <span class="kt">string</span> <span class="p">{</span>
        <span class="c1">// your custom filter</span>
        <span class="k">return</span> <span class="nv">$html</span><span class="p">;</span>
    <span class="p">});</span>
</code></pre></div></div> <h4 id="style"> <a href="#style" class="anchor-heading" aria-labelledby="style"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code class="language-plaintext highlighter-rouge">Style</code> </h4> <p>Styles are having following filters available:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Style</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Asset</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\OutputFilter\AsyncStyleOutputFilter</span><span class="p">;</span>

<span class="nv">$style</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Style</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/style.css'</span><span class="p">);</span>
<span class="nv">$style</span>
    <span class="o">-&gt;</span><span class="nf">withFilters</span><span class="p">(</span><span class="nc">AsyncStyleOutputFilter</span><span class="o">::</span><span class="n">class</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">useAsyncFilter</span><span class="p">()</span> <span class="c1">// shortcut to above method</span>
    <span class="o">-&gt;</span><span class="nf">useInlineFilter</span><span class="p">()</span> <span class="c1">// shortcut</span>
    <span class="o">-&gt;</span><span class="nf">withFilters</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="kt">string</span> <span class="nv">$html</span><span class="p">,</span> <span class="kt">Asset</span> <span class="nv">$asset</span><span class="p">):</span> <span class="kt">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$html</span><span class="p">;</span>
    <span class="p">});</span>
</code></pre></div></div> <h3 id="localize-data"> <a href="#localize-data" class="anchor-heading" aria-labelledby="localize-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Localize data </h3> <p>Scripts can have localized data via <code class="language-plaintext highlighter-rouge">wp_localize_script()</code>, which can be added like following:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/script.js'</span><span class="p">);</span>
<span class="nv">$script</span>
    <span class="o">-&gt;</span><span class="nf">withLocalize</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'multiple values'</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="nf">withLocalize</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">,</span> <span class="k">static</span> <span class="k">function</span><span class="p">():</span> <span class="kt">string</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">'other value'</span><span class="p">;</span>
    <span class="p">});</span>
</code></pre></div></div> <h3 id="translation-data"> <a href="#translation-data" class="anchor-heading" aria-labelledby="translation-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Translation data </h3> <p>Scripts can also have translation data via <code class="language-plaintext highlighter-rouge">wp_set_script_translations()</code>. This can be added like following:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/script.js'</span><span class="p">);</span>
<span class="nv">$script</span><span class="o">-&gt;</span><span class="nf">withTranslation</span><span class="p">(</span><span class="s1">'domain'</span><span class="p">,</span> <span class="s1">'/path/to/json/file.json'</span><span class="p">);</span>
</code></pre></div></div> <h3 id="script-enqueue-footerheader"> <a href="#script-enqueue-footerheader" class="anchor-heading" aria-labelledby="script-enqueue-footerheader"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Script enqueue Footer/Header </h3> <p>To enqueue a script in header or footer - default is “footer” - we have following API available:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/script.js'</span><span class="p">);</span>
<span class="nv">$script</span>
    <span class="o">-&gt;</span><span class="nf">isInFooter</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="nf">isInHeader</span><span class="p">();</span>
</code></pre></div></div> <h3 id="adding-inline-scripts"> <a href="#adding-inline-scripts" class="anchor-heading" aria-labelledby="adding-inline-scripts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adding inline scripts </h3> <p>To add inline scripts via <code class="language-plaintext highlighter-rouge">wp_add_inline_script()</code> to your <code class="language-plaintext highlighter-rouge">Script</code>, you can use following:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/script.js'</span><span class="p">);</span>
<span class="nv">$script</span>
    <span class="o">-&gt;</span><span class="nf">appendInlineScript</span><span class="p">(</span><span class="s1">'var foo = "bar";'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">prependInlineScript</span><span class="p">(</span><span class="s1">'var baz = "bam"'</span><span class="p">);</span>
</code></pre></div></div> <h3 id="adding-inline-styles"> <a href="#adding-inline-styles" class="anchor-heading" aria-labelledby="adding-inline-styles"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adding inline styles </h3> <p>To add inline styles via <code class="language-plaintext highlighter-rouge">wp_add_inline_style()</code> to your <code class="language-plaintext highlighter-rouge">Style</code>, you can use following:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Style</span><span class="p">;</span>

<span class="nv">$style</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Style</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/style.css'</span><span class="p">);</span>
<span class="nv">$style</span><span class="o">-&gt;</span><span class="nf">withInlineStyles</span><span class="p">(</span><span class="s1">'body { background-color: #000; }'</span><span class="p">);</span>
</code></pre></div></div> <h3 id="conditional-comments-for-scriptstyle"> <a href="#conditional-comments-for-scriptstyle" class="anchor-heading" aria-labelledby="conditional-comments-for-scriptstyle"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Conditional comments for Script/Style </h3> <p>Styles and Script can be wrapped into Conditional comments. To do so, you can use following:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Style</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/script.js'</span><span class="p">);</span>
<span class="nv">$script</span><span class="o">-&gt;</span><span class="nf">withCondition</span><span class="p">(</span><span class="s1">'gt IE 9'</span><span class="p">);</span> <span class="c1">// &lt;!--[if gt IE 9]&gt;&lt;script src="www.example.com/script.js"&gt;&lt;/script&gt;&lt;![endif]--&gt;</span>

<span class="nv">$style</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Style</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'www.example.com/style.css'</span><span class="p">);</span>
<span class="nv">$style</span><span class="o">-&gt;</span><span class="nf">withCondition</span><span class="p">(</span><span class="s1">'lt IE 9'</span><span class="p">);</span> <span class="c1">// &lt;!--[if lt IE 9]&gt;&lt;script src="www.example.com/style.css"&gt;&lt;/script&gt;&lt;![endif]--&gt;</span>
</code></pre></div></div> <h3 id="attributes"> <a href="#attributes" class="anchor-heading" aria-labelledby="attributes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Attributes </h3> <p>Allows you to set additional attributes to your <code class="language-plaintext highlighter-rouge">script</code>- or <code class="language-plaintext highlighter-rouge">link</code>-tag like following:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Style</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'my-handle'</span><span class="p">,</span> <span class="s1">'script.js'</span><span class="p">);</span>
<span class="nv">$script</span><span class="o">-&gt;</span><span class="nf">withAttributes</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="s1">'async'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s1">'data-value'</span> <span class="o">=&gt;</span> <span class="s1">'key'</span><span class="p">,</span>
        <span class="s1">'nonce'</span> <span class="o">=&gt;</span> <span class="nf">wp_create_nonce</span><span class="p">()</span>
    <span class="p">]</span>
<span class="p">);</span>
<span class="c1">// &lt;script src="script.js" id="my-handle-js" async data-value="key" nonce="{generated nonce}"&gt;&lt;/script&gt;</span>


<span class="nv">$style</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Style</span><span class="p">(</span><span class="s1">'my-handle'</span><span class="p">,</span> <span class="s1">'style.css'</span><span class="p">);</span>
<span class="nv">$style</span><span class="o">-&gt;</span><span class="nf">withAttributes</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="s1">'data-value'</span> <span class="o">=&gt;</span> <span class="s1">'key'</span><span class="p">,</span>
        <span class="s1">'nonce'</span> <span class="o">=&gt;</span> <span class="nf">wp_create_nonce</span><span class="p">()</span>
    <span class="p">]</span>
<span class="p">);</span>
<span class="c1">// &lt;link rel="stylesheet" href="style.css" id="my-handle-css" data-value="key" nonce="{generated nonce}" /&gt;</span>
</code></pre></div></div> <p>Existing attributes like “src” or “id” are not overwriteable. The <code class="language-plaintext highlighter-rouge">Inpsyde\Assets\OutputFilter\AttributesOutputFilter</code> only sets attributes which are not already existent on the html-tag. This will <em>not</em> work:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">use</span> <span class="nc">Inpsyde\Assets\Script</span><span class="p">;</span>

<span class="nv">$script</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Script</span><span class="p">(</span><span class="s1">'my-handle'</span><span class="p">,</span> <span class="s1">'script.js'</span><span class="p">);</span>
<span class="nv">$script</span><span class="o">-&gt;</span><span class="nf">withAttributes</span><span class="p">([</span><span class="s1">'src'</span> <span class="o">=&gt;</span> <span class="s1">'another-script.js'</span><span class="p">]);</span> <span class="c1">// Will not overwrite "script.js"</span>
</code></pre></div></div> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">Copyright (c) Inpsyde GmbH. The team at <a href='https://inpsyde.com'>Inpsyde</a> is engineering the Web since 2006.</p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
